# Global values shared across all subcharts
global:
  namespace: campaign-master
  environment: production

# Postgres subchart values
postgres:
  enabled: false  # Using RDS instead
  image:
    repository: postgres
    tag: "15"
    pullPolicy: IfNotPresent
  service:
    port: 5432
  auth:
    user: postgres
    password: postgres
    database: campaign_master
  persistence:
    enabled: true
    size: 5Gi
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

# Backend subchart values
backend:
  enabled: true
  image:
    repository: 471448382412.dkr.ecr.us-east-1.amazonaws.com/campaign-master-backend
    tag: e7e79d6  # backend-tag
    pullPolicy: IfNotPresent
  imagePullSecrets: []
  service:
    port: 5000
  env:
    # RDS endpoint - password should be injected from AWS Secrets Manager
    # Format: postgresql://username:password@host:port/database
    DATABASE_URL: postgresql://postgres:REPLACE_WITH_SECRET@campaign-master-staging-db.cab06swg2l8v.us-east-1.rds.amazonaws.com:5432/campaign_master
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi
  probes:
    enabled: true
    path: /api/health

# Nginx subchart values
nginx:
  enabled: true
  image:
    repository: 471448382412.dkr.ecr.us-east-1.amazonaws.com/campaign-master-frontend
    tag: 8e37304  # frontend-tag
    pullPolicy: IfNotPresent
  service:
    port: 80
  ingress:
    enabled: true
    className: nginx
    host: ""  # Allow access from any hostname (LoadBalancer URL)
    path: /
